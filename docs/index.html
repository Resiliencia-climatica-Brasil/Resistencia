<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-br" xml:lang="pt-br"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>index</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./bases_dados.html" rel="next">
<link href="./figs/1667403883848_theme_logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Procurar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tutoriais" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Tutoriais</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tutoriais">    
        <li>
    <a class="dropdown-item" href="https://resiliencia-climatica-brasil.github.io/diversity-resilience-python/apresentacao.html" rel="" target="">
 <span class="dropdown-text">Heterogeneidade da paisagem</span></a>
  </li>  
        <li class="dropdown-header">Conectividade local</li>
        <li>
    <a class="dropdown-item" href="https://resiliencia-climatica-brasil.github.io/diversity-resilience-python/resilience.html" rel="" target="">
 <span class="dropdown-text">Resiliência</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="https://projeto-resiliencia-tnc.hub.arcgis.com" rel="" target="">
 <span class="menu-text">Mapas</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://resiliencia-climatica-brasil.github.io/Relatorio_final/" rel="" target="">
 <span class="menu-text">Relatório Técnico</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./index.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Conectividade local</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./figs/1667403883848_theme_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Conectividade local</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bases_dados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bases de dados e arquivos utilizados na análise</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reamostragem_mapbiomas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reamostragem do MapBiomas</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./largura_corpos_dagua.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Largura dos corpos d’água</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./infra_transporte_energia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Infraestrutura de transporte e de energia</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./valores_resistencia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Valores de resistência e combinação das bases de dados</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resultado_conectividade.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Aplicação de filtros e camada final</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#conectividade-local" id="toc-conectividade-local" class="nav-link active" data-scroll-target="#conectividade-local"><span class="header-section-number">1</span> Conectividade local</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="conectividade-local" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Conectividade local</h1>
<p>A análise de conectividade local é uma das camadas utilizadas para gerar o mapa de resiliência da paisagem. A conectividade local é calculada sobre uma superfície de resistência ao movimento dos organismos na paisagem. Essa superfície representa, por meio da atribuição de pesos, o grau de dificuldade que os diferentes tipos de usos e coberturas do solo oferecem à movimentação dos organismos, sendo as coberturas naturais aquelas com menor resistência e as superfícies mais antropizadas (ex. áreas urbanas, áreas agrícolas), com maior resistência.</p>
<!-- 2024-03-04 remover
As áreas resilientes às mudanças climáticas são classificadas por dois eixos, (1) a **heterogeneidade da paisagem** e (2) **conectividade local**. A conectividade local é calculada sobre uma superfície de resistência ao movimento dos organismos na paisagem. Essa superfície representa, por meio da atribuição de pesos, o grau de dificuldade que os diferentes tipos de usos e coberturas do solo oferecem à movimentação dos organismos, sendo as coberturas naturais aquelas com menor resistência e as superfícies mais antropizadas, com maior resistência (ex. áreas urbanas). -->
<p>A superfície de resistência foi calculada usando como base os dados de uso e cobertura do solo fornecida pelo MapBiomas. A essa base foram incorporadas informações sobre a largura dos rios e também dados sobre infraestrutura de transporte e de energia. Ao longo da análise para gerar a superfície de resistência, primeiro foram atribuídos os valores de resistência à tabela com as classes de uso e cobertura do solo do MapBiomas e depois foram acrescentadas as classes de largura dos corpos d’água, bem como as classes de infraestrutura de transporte e de energia, com pesos de resitência específicos para cada classe.</p>
<p>Essas análises foram realizadas no ArcGis 10.5. Todas as ferramentas do ArcGis 10.5 descritas aqui podem ser acessadas no ícone de busca.</p>
<p>O fluxograma da análise de conectividade local é apresentado na <span class="citation" data-cites="fluxgeral">(<a href="#ref-fluxgeral" role="doc-biblioref"><strong>fluxgeral?</strong></a>)</span> e pode ser dividido em cinco etapas principais:</p>
<ul>
<li>Etapa 1: Reamostragem do MapBiomas</li>
<li>Etapa 2: Largura dos corpos d’água</li>
<li>Etapa 3: Infraestrutura de transporte e de energia</li>
<li>Etapa 4: Valores de resistência e combinação das bases de dados</li>
<li>Etapa 5: Aplicação de filtros e camada final</li>
</ul>
<!-- 2024-03-04 [INSERIR FIGURA GERAL DO FLUXOGRAMA AQUI] -->
<div id="fluxgeral" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figs/Fluxograma_geral.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Fluxograma da análise de conectividade local.</figcaption>
</figure>
</div>
<!-- 
//////////////////////////////////////////////////////
2024-03-05
TUDO O QUE ESTÁ ABAIXO FOI SEPARADO EM qmd ESPECÍFICOS.
MANTIVE APENAS PARA CONFERÊNCIA ANTES DE FINALIZARMOS.
O TEXTO ATUALIZADO ESTÁ NOS QMD ESPECÍFICOS.
//////////////////////////////////////////////////////


## Bases de dados e arquivos utilizados na análise

As bases de dados e arquivos utilizadas em cada etapa da análise são apresentadas abaixo.

### Uso e cobertura do solo

+ MapBiomas Coleção 8 - Ano 2021 [LINK COLEÇÃO 8]: (Projeto MapBiomas – Coleção 8 da Série Anual de Mapas de Cobertura e Uso da Terra do Brasil, acessado em outubro de 2023 através do link: https://storage.googleapis.com/mapbiomas-public/initiatives/brasil/collection_8/lclu/coverage/brasil_coverage_2022.tif)  

### Largura dos rios

<!-- 2024-03-04 remover
As informações sobre largura dos rios foram derivadas a partir das camadas de águas abertas do MapBiomas [@mapbiomas_project_collection_2020], a camada de bacias hidrográficas no nível 8 [Lehner &Grill (2013)]<!--COLOCAR NO ZOTERO   e a camada de largura efetiva dos corpos d'água [Yamashida et al. 2014]. -->
<!--
+ MapBiomas Água: [INSERIR LINK BASE DE DADOS - PARA DOWNLOAD]

+ Bacias hidrográficas nível 8 (Lehner &Grill 2013): [INSERIR LINK BASE DE DADOS - PARA DOWNLOAD]

+ Largura efetiva dos corpos d'água (Yamashida et al. 2014): [INSERIR LINK BASE DE DADOS - PARA DOWNLOAD] -->
<!-- acho importante colocar também o link para o download, não somente a citação. No caso das bacias foi o HydroSHEDS? -->
<!-- 2024-03-04 remover
### Infraestrutura de transporte e de energia


As informações sobre infraestrutura de transporte foram originadas a partir das camadas de estradas pavimentadas, estradas não-pavimentadas e ferrovias fornecidas pelo Instituto Brasileiro de Geografia e Estatística (IBGE) (\[BCIM250, 2021\]) (<https://www.ibge.gov.br/geociencias/cartas-e-mapas/bases-cartograficas-continuas/15759-brasil.html?=&t=downloads>).
As bases de infraestrutura de energia correspondem às camadas de aerogeradores, centrais geradoras de energia fotovoltaicas, linhas de transmissão de energia eólica e usinas termelétricas fornecidas pela Agência Nacional de Energia Elétrica (ANEEL) (<https://gisepeprd2.epe.gov.br/WebMapEPE/>) e a camada de linhas de transmissão de energia fornecida pelo IBGE (\[BCIM250, 2021\]).


+ Estradas pavimentadas, estradas não-pavimentadas, ferrovias e linhas de transmissão de energia (IBGE - BCIM250, 2021):
<https://www.ibge.gov.br/geociencias/cartas-e-mapas/bases-cartograficas-continuas/15759-brasil.html?=&t=downloads>

+ Aerogeradores, centrais geradoras de energia fotovoltaicas, linhas de transmissão de energia eólica e usinas termelétricas (ANEEL):
<https://gisepeprd2.epe.gov.br/WebMapEPE/>

<!-- houve a necessidade de filtrar algum dados antes para fazer as análises, por exemplo na parte de energia, algum filtro foi aplicado para retirar informações que não eram necessárias? 


### Filtro *kernel*

+ Filtro *kernel*: [ADICIONAR ARQUIVO TXT COM O FILTRO] 


## Reamostragem do MapBiomas

A reamostragem da base de dados do MapBiomas corresponde à Etapa 1 da análise de conectividade local. Foi necessário reamostrar os dados do MapBiomas de 30 m (resolução original) para 90 m. A reamostragem foi realizada com o uso da ferramenta "Resample" pelo *método de vizinho mais próximo* (*nearest*). 

Para essa etapa, o arquivo de entrada "input raster" correspondeu à camada original do MapBiomas e para o arquivo de saída "output raster" atribuímos um novo nome. A resolução de aproximadamente 90 m (ou seja 0.00083333333) para o pixel do novo arquivo gerado foi indicada no campo `Output Cell Size (optional)`. A escolha do método `Nearest` foi definida no campo `Resampling technique (optional)` (@fig-1). No final do processo de reamostragem seguimos a mesma classificação proposta pelo MapBiomas para colorir os usos do solo (@map1-mapbiomas). Esse processo gerou a listagem de 29 classes de uso e cobertura do solo. 

<!-- 2024-03-04 remover
As análises conduzidas para o mapeamento das áreas resilientes às mudanças climáticas foram realizadas na resolução espacial de 90 metros. Desta forma, reamostramos os dados do MapBiomas, que originalmente estavam com resolução de 30 metros, para uma resolução de 90 metros. A reamostragem foi realizada com o uso da ferramenta "Resample" pelo **método de vizinho mais próximo** (*nearest*). O arquivo de entrada "input raster" correspondeu a camada original do MapBiomas, e para o arquivo de saída "output raster" atribuímos um novo nome. A resolução de aproximadamente 90 metros (ou seja 0.00083333333) para o pixel do novo arquivo gerado foi estabelecida no campo `Output Cell Size (optional)`. A escolha do método `Nearest` foi definida no campo `Resampling technique (optional)` (@fig-1). No final do processo de reamostragem seguimos a mesma classificação proposta pelo MapBiomas (com 27 classes) para colorir os usos do solo (@map1-mapbiomas).


![Método da reamostragem da superfície de uso e cobertura do solo (MapBiomas coleção 8 de 2021), de 30 m para 90 m, por meio da técnica NEAREST, no ArcGis 10.5.](figs/fig_1.png){width=100% #fig-1}

![Classificação do uso e cobertura do solo convertida de uma resolução de 30 m para 90 m, tomando como base MapBiomas, coleção 8 de 2023.](figs/map1_mapbiomas.png){width=100% #map1-mapbiomas}


## Largura dos corpos d'água

A camada de uso e cobertura do solo na escala de 90 m equivalente a águas abertas (rios, lagos e oceanos; @map2_aguas) foi subdividida em quatro classes distintas de acordo com a largura dos corpos d’água.

![Camada de águas abertas do MapBiomas, usada como base para classificação dos tamanhos dos rios.](figs/map2_aguas.png){width=100% #map2-aguas}


Nessa etapa, inicialmente extraímos a máscara de corpos de águas abertas e dividimos essa classe única em pedaços menores, regionalizando suas larguras por trechos. Esta divisão ocorreu com o uso da ferramenta “Raster Calculator” (@fig-2), por meio da intersecção entre as camadas matriciais de águas abertas e de bacias hidrográficas no nível 8, produzidas por Lehner &Grill (2013) (@map3-bacias).

![Ferramenta “Raster Calculator”, do programa ArcGis 10.5, utilizada para a intersecção entre as camadas de águas abertas e bacias hidrográficas, gerando trechos de corpos d’água utilizados para consulta da largura dos mesmos.](figs/fig_2.png){width=100% #fig-2}

![Bacias hidrográficas de nivel 8 (Lehner &Grill 2013).](figs/map3_bacias.png){width=100% #map3-bacias}

Para cada um dos trechos gerados, foi calculado o valor máximo de largura de cada trecho de águas abertas, por meio meio da estatística zonal (@fig-3). A largura efetiva máxima dos corpos d’água, de margem a margem, foi obtida através da base GWD – LR de Yamashida et al. 2014 (@map4-aguasporbacias). 

![Uso da ferramenta “Zonal Statistics”, do programa ArcGis 10.5, para calcular a largura máxima de cada trecho de corpos d’água por unidade de consulta.](figs/fig_3.png){width=100% #fig-3}

![Divisão da camada de águas abertas do MapBiomas recortada pelas bacias hidrográficas de nivel 8.](figs/map4_aguasPORbacias.png){width=100% #map4-aguasporbacias}

Com base nos valores de largura máxima agrupamos os trechos dos rios em quatro classes de largura:

+ i. 1 a 250 m;
+ ii. 250 a 1.000 m; 
+ iii. 1.000 a 4.000 m;
+ iv. maior de 4.000 m. 

Por meio da ferramenta “Mosaic to New Raster” (@fig-4), realizamos uma mosaicagem entre a camada contendo essas quatro classes e a camada do MapBiomas (já subtraída da classe de águas abertas), elevando de 29 para 32 o número de classes de uso e cobertura do solo.

![Ferramenta “Mosaic to New Raster”, do programa ArcGis 10.5, utilizada para fazer a mosaicagem entre a superfície contendo as quatro classes de corpos d’água com larguras distintas e a superfície do MapBiomas 2021 na escala de 90 m sem a classe de águas abertas (a ser substituída pelas quatro novas classes de corpos d’água).](figs/fig_4.png){width=100% #fig-4}

<!--
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ESTOU COLOCANDO ESSA SEÇÃO EM COMENTÁRIO PORQUE ESTÁ EXPLICADO ANTERIORMENTE. 
TALVEZ POSSAMOS REVISAR OS DOIS TEXTOS E VER SE TEM ALGUMA INFORMAÇÃO AQUI QUE AINDA NÃO FOI EXPLICADO ACIMA?
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

## Classificação das larguras dos rios

A classe de cobertura do solo equivalente a águas abertas (rios, lagos e oceanos) recebeu valores de resistência variando em função da largura desses corpos d’água já que rios maiores são barreiras mais resistentes à movimentação da biodiversidade terrestre. Para que isso fosse possível, tivemos que dividir os corpos d’água em pedaços menores, regionalizando suas larguras por trechos. Nesta divisão usamos as bacias hidrográficas no nível 8 produzidas por Venticinque e colaboradores (2021). Os trechos de corpos d’água foram utilizados para segmentar a largura efetiva dos corpos d’água, de margem a margem, ao longo de todo o canal da base disponibilizada por Yamashida e colaboradores (2014).

Para cada trecho da máscara de corpos d’água por bacias, com base nos dados de largura efetiva de margem a margem, extraímos o valor máximo de largura, sendo esse valor utilizado como medida de largura de cada trecho de águas abertas. Uma vez identificada a largura máxima de cada trecho de corpo d’água, agrupamos os rios nas seguintes classes de largura: i. 1 a 250 metros, ii. 250 a 1000 metros, iii. 1000 a 4000 metros e iv. maiores de 4000 metros. A inclusão dessas quatro classes de largura de corpos d’água, elevou de 34 para 37 o número de classes de cobertura do solo. Os valores de resistência atribuído para cada uma dessas classes variou e podem ser vistos na @tbl-2.



## Infraestrutura de transporte e de energia

<!-- 2024-03-04 Precisa descrever aqui quais dados estão sendo utlizados. Bases IBGE e ANEEL e listar direitinho quais dados dessas bases - não foram todos de energia e isso precisa ficar bem claro. -->
<!--
As camadas de infraestrutura de transporte e de energia foram inicialmente convertidas de formatos vetoriais para *raster*, com pixels de tamanho aproximado de 90 m (@fig-2). Essa conversão foi realizada para cada arquivo usando a ferramenta `Polyline to Raster`, onde o arquivo de entrada "Input Features" corresponde à camada de infraestrutura original e o arquivo de saída "Value field" é a camada *raster* que será criada. A definição da resolução espacial "Output Raster Dataset" corresponde a 0.00083333333 (ou seja 90 m de resolução).

![Método de conversão de arquivos vetoriais para arquivos matriciais (*raster*) já definindo os pixels com tamanho aproximado de 90 m, no ArcGis 10.5.](figs/fig2.png){width=100% #fig-2}

As camadas *raster* geradas receberam valores de resistência (ver item Valores de resistência) como atributo específico das classes de infraestrutura e, posteriormente, todas as camadas foram agrupadas em um único arquivo matricial. Para realizar esse agrupamento, usamos a ferramenta `Cell Statistics`, informando, no campo `overlay satatistic`, que o resultado do agrupamento deve considerar o valor máximo do pixel (@fig-3). Essa indicação é importante para que, na sobreposição das várias camadas de infraestrutura, prevaleça sempre o valor de pixel com resistência mais alta.

![Uso da ferramenta “`Cell Statistics`”, no ArcGis 10.5, para agrupar as bases de infraestrutura em uma única superfície, onde prevalecem os valores máximos de resistência atribuídos a cada classe.](figs/fig3.png){width=100% #fig-3}

Usando novamente a ferramenta `Cell Statistics` conjugamos as bases matriciais de infraestrutura de transporte e energia indicadas acima com a camada de uso e cobertura do solo combinada com as classes de corpos d'água. Da mesma forma como conduzido anteriormente, no agrupamento das camadas de infraestrutura de transporte e de energia, durante a sobreposição, prevaleceu sempre o maior valor de resistência: no campo `overlay satatistic` o resultado do agrupamento deve considerar o valor máximo do pixel (@fig-4). Feita esta operação, obtivemos uma nova superfície matricial (*raster*), combinando todas as classes listadas aqui.

![Uso da ferramenta “Cel Statistics”, no ArcGis 10.5, para agrupar a camada de infraestrutura de transporte e de energia com a camada de uso e cobertura em uma única superfície, onde prevalecem os valores máximos de resistência atribuídos a cada classe.](figs/fig4.png){width=100% #fig-4}


## Valores de resistência

Os valores de resistência para cada classe de uso e cobertura do solo foram atribuídos, por bioma, pela equipe do projeto e por especialistas. Esses valores variaram de 1 a 20 em números inteiros, sendo 1 o valor de menor resistência e 20 o de maior resistência (@tbl-1).

Iniciamos a atribuição dos valores de resistência na camada de uso e cobertura do solo (Tabela 1). A esse conjunto de dados, acrescentamos uma coluna na tabela de atributos, com as 4 classes de largura dos corpos d'água. Por fim, atribuímos à camada de infraestrutura de transporte e de energia, os valores de resistência e combinamos o resultado à camada anterior (conforme descrito no item anterior).

O mapa consolidado de cobertura e uso do solo, combinando as classes de largura dos corpos d'água e as classes de infraestrutura de transporte e de energia, totalizou 39 classes.
-->
<!-- NECESSÁRIO INCLUIR A TABELA DE RESISTÊNCIAS GERADA ATÉ AQUI -->
<!-- 2024-03-04 remover
Os valores de resistência têm como objetivo representar de forma comparativa o grau de dificuldade imposto à movimentação da biodiversidade por cada classe específica de uso e cobertura do solo. As premissas assumidas para definir os valores foram: i. quanto maior for a diferença estrutural da classe de cobertura do solo para o hábitat original do bioma, maior será a dificuldade à movimentação que a classe oferece e ii. corpos d’água mais largos oferecem maior resistência ao deslocamento de organismos terrestres na paisagem do que corpos d’água mais estreitos. -->
<!--
|N|Classe de cobertura do solo|Amazônia|Caatinga|Cerrado|Mata Atlântica|Pampa|Pantanal|
|--:|--:|--:|--:|--:|--:|--:|--:|
|1|Afloramento rochoso|3|1|2|3|2|-|
|2|Algodão|7|7|10|-|-|-|
|3|Aquacultura|-|10|7|7|7|-|
|4|Área urbana|20|20|20|20|20|20|
|5|Áreas alagadas (Campos e Pântanos)|1|-|1|2|1|1|
|6|Arroz|-|-|10|10|10|-|
|7|Café|-|7|10|4|-|-|
|8|Cana de açúcar|15|10|10|10|-|10|
|9|Citrus|-|-|10|4|-|-|
|10|Dendê|10|-|-|-|-|-|
|11|Floresta alagada|1|-|-|-|-|-|
|12|Formação campestre (campos)|1|1|1|2|1|1|
|13|Formação de savana|1|1|1|2|-|1|
|14|Formação florestal|1|1|1|1|1|1|
|15|Mangue|1|1|1|1|-|-|
|16|Mineração|20|20|20|20|20|20|
|17|Mosaico de usos|10|7|10|10|10|7|
|18|Outras áreas não vegetadas|10|10|10|10|10|10|
|19|Outras culturas perenes|10|7|7|4|-|-|
|20|Outras culturas temporárias|15|7|10|10|10|5|
|21|Outras formações não florestais|-|7|-|2|-|-|
|22|Pastagem|17|7|7|9|7|7|
|23|Praia, duna e areal|2|2|2|2|2|2|
|24|Salina (Apicum)|2|1|2|2|-|-|
|25|Silvicultura (floresta plantada)|7|2|7|3|10|5|
|26|Soja|17|10|10|10|10|10|
|27|Vegetação de restinga arbórea|-|1|-|1|1|-|
|28|Vegetação de restinga herbácea|-|1|-|2|1|-|
|29|Corpos d’águas abertas até 250 m|2|2|2|2|2|2|
|30|Corpos d’águas abertas de 250 a 1000 m|5|5|5|5|5|5|
|31|Corpos d’águas abertas de 1000 a 4000 m|10|10|10|10|10|10|
|32|Corpos d’águas abertas acima de 4000 m|12|12|12|12|12|12|
|33|Aerogeradores|15|15|15|15|15|15|
|34|Centrais geradoras de energia solar|15|17|17|17|17|17|
|35|Estradas não pavimentadas|10|10|7|10|7|3|
|36|Estradas pavimentadas|20|20|20|20|20|20|
|37|Ferrovias|10|10|10|10|10|10|
|38|Linhas de transmissão (tradicionais e anexas ao sistema eólico)|10|7|7|7|7|7|
|39|Termelétricas|20|20|20|20|20|20|
: Valores de resistência, por bioma, para as 39 classes de uso e cobertura do solo, resultado da combinação das superfícies de uso e cobertura do solo do MapBiomas (N: 1 - 28), as classes de tamanho dos rios (N: 29 - 32) e da camada de infraestrutura de transporte e de energia (N: 33 - 39). {#tbl-1}
-->
<!--
COMO COLOCAMOS ESSES VALORES DENTRO DAS NOSSAS CAMADAS? 
NO TEXTO SAIMOS DIRETO DAS CAMADAS E DA TABELO PRO MAPA FINAL DE RESISTÊNCIA SEM DIZER COMO PODEMOS DEFINIR OS VALORES DOS PIXELS
-->
<!--
ATUALIZAR MAPA DE RESISTÊNCIA
 -->
<!--
![Superfície de resistência gerada a partir do mapa com 39 classes de uso e cobertura do solo, resultado da combinação das superfícies de uso e cobertura do solo do MapBiomas e de infraestrutura. Nesta superfície a resistência das águas abertas (rios, lagos e oceanos) não foi diferenciada em função da largura dos corpos d’água.](figs/fig6.png){width=100% #fig-5}


## Resultado de conectividade local
-->
<!--
FALTA COMPLEMENTAR TODA ESSAS SESSÃO COM AS IMAGENS DE COMO FAZER O PASSO A PASSO NO ARCGIS

**2024 -  ainda nao temos as fotos com o passo a passo dessa seção (fig 6 até a 11)**
-->
<!--
A superfície final de conectividade local foi gerada a partir dos seguintes passos:

Passo 1 - Usando a ferramenta “Reclassify” do Spatial Analyst (Figura 9 - @fig6) construímos máscaras a partir da superfície de uso e cobertura do solo, gerando duas superfícies:
+ a.    Superfície de águas abertas, onde as classes de largura dos rios receberam o valor de 1 e as demais classes foram consideradas como "NoData" (@fig7).
+ b.    Superfície terrestre, onde as classes de água foram reclassificadas para "NoData" e das demais receberam o valor igual a 1 (@fig7).
-->
<!--
ADICIONAR FIGURA 6 MOSTRANDO COMO FAZER O RECLASSIFY
ADICIONAR COMO FICAM AS IMAGENS DAS SUPERFICIES A E B??
-->
<!--
Passo 2 - Usando a ferramenta Focal Statistics, aplicamos a função *kernel* à superfície de resistência gerada para todo o Brasil (Figura 10 - @fig8). Esta análise considerou uma função de decaimento linear em uma janela móvel definida por um raio de 23 pixels (~2.070 m).
-->
<!-- 2024-03-04 remover
que representa o contexto espacial em que cada pixel está inserido, reconhecendo que pixels mais próximos possuem maior influência um sobre o outro do que pixels mais distantes, influenciando o valor de conectividade local de cada pixel. Desta maneira, a função Kernel nos auxilia na tarefa de encontrar os melhores caminhos de deslocamento na paisagem, ou seja, aqueles caminhos que oferecem menor resistência. -->
<!--
Passo 3 - Multiplicamos a superfície gerada no passo 2 pela superfície *a* (águas abertas) geradas no Passo 1. Essa multiplicação foi realizada com o uso da ferramenta “Raster Calculator” (Figura 11 - @fig9), nos fornecendo os valores de conectividade local apenas para os corpos d’água.
-->
<!-- 2024-03-04 remover
Os valores de conectividade local gerados para as águas abertas, uma vez que foram gerados juntamente com os valores para as áreas terrestres (no Passo 2), consideram a influência da resistência das áreas terrestres na conectividade dos corpos d’água. Na prática isso quer dizer que se um pequeno corpo d’água estiver inserido em uma área de baixa resistência, como uma formação florestal, ele terá valores de conectividade local maiores do que se estiver inserido em uma área de alta resistência, como uma pastagem, por exemplo. -->
<!--
Passo 4 - Multiplicamos a superfície *b* (máscara das classes terrestres) gerada no Passo 1 pela superfície de resistência original. Esta operação foi realizada com o auxílio da ferramenta “Raster Calculator” (Figura 11 - @fig9) e nos forneceu um arquivo de resistência apenas para as áreas terrestres.
-->
<!-- 2024-03-04 remover
Neste cenário os valores de resistência das classes de águas abertas, por terem sido excluídos das análises, não afetam os valores de resistência das áreas terrestres. -->
<!--
Passo 5 - Aplicamos o filtro *kernel* à superfície de resistência das classes terrestres (gerada no Passo 4). Essa análise foi realizada com o auxílio da ferramenta “Focal Statistics” e gerou uma camada de conectividade local onde as áreas terrestres não são influenciadas pelas águas abertas.
-->
<!-- 2024-03-04 remover
Ou seja, nesta operação esperamos que um organismo terrestre não evite um pixel de habitat na borda de um rio largo, por exemplo, simplesmente porque esse rio oferece uma grande resistência para ser transposto. -->
<!--
Passo 6 - Usando a ferramenta “Mosaic to new Raster” (Figura 12- @fig10), realizamos a mosaicagem das superfícies geradas nos Passos 4 e 5.
 Esse produto é considerado a nossa superfície final de conectividade local (Figura 13 - @fig11). -->
<!--
Por fim, para calcularmos os valores finais de conectividade local multiplicamos os valores de resistência por -1 por considerarmos que a conectividade é o inverso dos valores de resistência suavizados pelo filtro *kernel* @fig-7.


![Conectividade local, definida como o inverso da resistência à movimentação de organismos das diferentes classes de uso e coberturas do solo.](figs/fig7.png){width=100% #fig-7}  -->


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
      <a href="./bases_dados.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Bases de dados e arquivos utilizados na análise</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>